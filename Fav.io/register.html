<html>

<head>
    <title>Login</title>
    <link rel="shortcut icon" href="/static/img/icon.png" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/solid.css">
    <script src="https://use.fontawesome.com/releases/v5.0.7/js/all.js"></script>
    <link rel="stylesheet" type="text/css" href="static/css/index.css">
</head>

<body>
    <div class="rpg">
        <h1 class="notetask" align="center">Regis</h1>
        <h1 class="notetask2" align="center">tro</h1>


    </div>
    <div class="modal-dialog text-center">
        <div class="col-sn-8 main-section">
            <div class="modal-content">
                <div class="col-12 user-img">
                    <img class="img" src="/static/img/icon.png">
                </div>
                <form class="col-12" id="cuadro">
                    <div class="form-group" id="user">
                        <input class="form-control" type="text" placeholder="Nombre de usuario" id="name" />
                    </div>
                    <div class="form-group" id="email">
                        <input class="form-control" type="text" placeholder="Correo electronico" id="mail" />
                    </div>

                    <div class="form-group" id="pass">
                        <input class="form-control" type="password" placeholder="Contraseña" id="passw" />
                    </div>

                    <a><button type="button" class="btn btn-danger" onclick="register()"><i
                                class="fas fa-play"></i> Registrarme</button></a>
                </form>
                <div class="col-12 forgot">
                    <a href="index.html">¿Ya tienes cuenta? Inicia sesion.</a>
                </div>
            </div>
        </div>
    </div>
        <script>
            const URL = 'https://fierce-hollows-60824.herokuapp.com/auth/local/register';


            function register() {
                let name = document.getElementById('name').value;
                let email = document.getElementById('mail').value;
                let password = document.getElementById('passw').value;
                if (name == "" || email == "" || password == "") {
                    alert('Porfavor introduce todos los datos')
                } else {
                    postRequest(name, email, password);
                    alert('Te has registrado correctamente!');
                    location.href = "index.html";
                }

            }


            function postRequest(name, mail, pass) {
                const options = {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        username: name,
                        email: mail,
                        password: pass,
                    }),
                };
                return fetch(URL, options)
                    .then(response => response.json())
                    .then(data => data);
            }
        </script>
</body>

</html>